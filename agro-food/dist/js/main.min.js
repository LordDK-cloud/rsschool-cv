"use strict";var init=0;function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function seriesLinks(e){e.forEach(function(t){t.setAttribute("data-count","0"),t.addEventListener("click",function(t){var n=t.target,o=n.dataset.card,c=document.querySelector('[data-card="'.concat(+o-1,'"]')),r=c.dataset.card;1!=n.dataset.card&&(n.dataset.count=+n.dataset.count-100,n.setAttribute("style","transform:translateY(".concat(n.dataset.count,"%)")),c.dataset.count=+c.dataset.count+100,c.setAttribute("style","transform:translateY(".concat(c.dataset.count,"%)")),n.dataset.card=r,c.dataset.card=o,e.forEach(function(e){1==e.dataset.card?e.classList.add("active"):e.classList.remove("active")}))})})}function headerMenu(e){var t=document.querySelector(".drag"),n=document.querySelector(".menu__item-link");t.setAttribute("style","transform:translateX(".concat(n.getBoundingClientRect().left-scrollWidth/2,"px);width:").concat(n.getBoundingClientRect().width,"px")),e.forEach(function(e){e.addEventListener("click",function(n){n.target;var o=e.getBoundingClientRect();t.setAttribute("style","transform:translateX(".concat(o.left,"px);width:").concat(o.width,"px"))})})}function headerMenu2(e){var t=document.querySelector(".drag"),n=document.querySelector(".menu__item-link");t.setAttribute("style","transform:translateX(".concat(n.getBoundingClientRect().left+scrollWidth/2,"px);width:").concat(n.getBoundingClientRect().width,"px")),e.forEach(function(e){e.addEventListener("click",function(n){n.target;var o=e.getBoundingClientRect();t.setAttribute("style","transform:translateX(".concat(o.left,"px);width:").concat(o.width,"px"))})})}function allText(){document.querySelectorAll(".section-menu__more").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=e.target.parentElement,n=document.querySelector(".modal"),o=document.querySelector(".btn-close"),c=document.querySelector(".modal-text");n.classList.toggle("modal--active"),n.setAttribute("tabindex","2"),c.innerHTML=t.dataset.alltext,o.addEventListener("click",function(){n.classList.remove("modal--active"),n.removeAttribute("tabindex")}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(n.classList.remove("modal--active"),n.removeAttribute("tabindex"))})})})}function postsHeight(e,t){var n=document.querySelectorAll(".".concat(e)),o=n[0].getBoundingClientRect().width,c=o/100*+t;n.forEach(function(e){e.style.cssText+="height:".concat(o+c,"px")})}function agro_perfect_text(){document.querySelectorAll(".agro-perfect__text").forEach(function(e){var t=e.innerHTML.split(" "),n=0,o="";t.forEach(function(e){(n+=1)<=12&&(o+="".concat(e," "))}),e.innerHTML=o})}window.addEventListener("load",function(){var e=document.querySelector(".preloader");setTimeout(function(){e.setAttribute("style","opacity:0; overflow:hidden;"),setTimeout(function(){e.style.display="none",document.querySelector("body").removeAttribute("style")},1e3)},0)}),testWebP(function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")});var div=document.createElement("div");div.style.overflowY="scroll",div.style.width="50px",div.style.height="50px",document.body.append(div);var scrollWidth=div.offsetWidth-div.clientWidth;function anchor(){document.querySelectorAll(".scroll-to").forEach(function(e){e.addEventListener("click",function(e){var t=document.querySelector("nav.menu"),n=document.querySelector(".burger");t.classList.remove("menu--active"),n.classList.remove("burger--active"),e.preventDefault();var o=e.target.getAttribute("href").replace(/[#]/,""),c=document.querySelector("[id=".concat(o,"]")).getBoundingClientRect().top+pageYOffset,r=pageYOffset,a=setInterval(function(){c>=r-40&&c<=r+40&&clearInterval(a),c>r?c>=r-350&&c<=r+350?(r+=7,window.scrollTo(0,r)):(r+=13,window.scrollTo(0,r)):c<r&&(c>=r-350&&c<=r+350?(r-=7,window.scrollTo(0,r)):(r-=13,window.scrollTo(0,r)))},1)})})}function burger(){var e=document.querySelector(".burger"),t=document.querySelector("nav.menu");e.addEventListener("click",function(){e.classList.toggle("burger--active"),t.classList.toggle("menu--active")})}function map2Gis(){var e;DG.then(function(){var t=DG.icon({iconUrl:"images/marker2gis.png",iconSize:[39,49],alt:"agro foot find us here"});e=DG.map("map",{center:[54.98,82.89],zoom:13,zoomControl:0,fullscreenControl:0}),DG.marker([54.98,82.89],{icon:t}).addTo(e)})}function toScrolled(e){var t=document.querySelector(e).getBoundingClientRect().top+pageYOffset-600;pageYOffset>=t&&0==init&&(map2Gis(),init=1)}div.remove(),document.addEventListener("DOMContentLoaded",function(){var e,t=document.querySelectorAll(".card__menu-link"),n=document.querySelectorAll(".menu__item-link"),o=document.querySelector(".author");headerMenu(n),postsHeight("blog__post","7"),postsHeight("gallery__img","-7"),window.addEventListener("resize",()=>{postsHeight("gallery__img","-7"),headerMenu2(n),postsHeight("blog__post","7")}),seriesLinks(t),allText(),anchor(),burger(),agro_perfect_text(),window.addEventListener("scroll",function(){toScrolled("footer")}),e=new Swiper(".swiper-container",{pagination:{el:".comm-pagination",type:"bullets",clickable:1}}),document.querySelector(".comm-pagination").setAttribute("style","transform:translate(0, -".concat(o.getBoundingClientRect().height/2-8,"px)")),document.addEventListener("keydown",function(t){"37"==t.keyCode?e.slidePrev():"39"==t.keyCode&&e.slideNext()})}),svg4everybody({});
